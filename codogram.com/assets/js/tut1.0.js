var L='<div class="vert c-pv preloader-wrapper small active"><div class="spinner-layer spinner-red-only"><div class="circle-clipper left"><div class="circle"></div></div><div class="gap-patch"><div class="circle"></div></div><div class="circle-clipper right"><div class="circle"></div></div></div></div>',CF=0,CR=0,RF=0,LD=[],MR=0;
$(W).ready(function(){var LK=0;$('#like-icon').click(function(){if(LK===0){LK=1;var T=$(this);T.remove();$.ajax({type:'post',url:'/ajax/like.php',data:'token='+$('#csrf-token').val(),dataType:'json',success:function(s){if(s.success && s.data_value){$('#like-count b').text(s.data_value);$('#like-btn').html('<i id="liked" class="small red-text text-accent-3 mdi-action-stars"></i>');Materialize.toast('You have liked this tutorial',4000,'blue accent-4');}if(s.error){if(s.error==='login'){whm('To Like This Tutorial')}else if(s.error==='token'){location.reload()}}}})}});});
$(W).on('submit','#comment-form',function(e){EP(e);var Z=$('.ec-err');if($('#comment-box').val().trim() !=""){$('#comment-btn').html(L);if(CF===0){var T=$(this);CF=1;$.ajax({type:'post',url:'/ajax/tutorial_comment.php',data:T.serialize()+'&token='+$('#csrf-token').val(),success:function(r){CF=0;$('#comment-btn').html('Comment');if(r==='1'){location.reload();}else if(r==='2'){location.href='/login';}else if(r==='3'){Z.text('*You Cannot Enter Blank Comment*')}else if(r==='4'){Z.text('*Comment is Too long. Maximum 5000 characters*');}else if(r==='5'){Z.text('*Something Went Wrong. Please Refresh The Page And Try Again.*');}else{T[0].reset();Z.html('&nbsp;');$('#comments-area').prepend(r);$('#tut-c-count').text(parseInt($('#tut-c-count').text())+1);}}})}}else{Z.text('*You cannot enter blank comment*')}});
$(W).on('click','#remove-comment',function(e){EP(e);if(confirm('Are you sure you want to delete this comment?')){if(CR===0){CR=1;var T=$(this);var id=T.attr('data-id');$.ajax({type:'post',url:'/ajax/remove_tutorial_comment.php',dataType:'json',data:'id='+id+'&token='+$('#csrf-token').val(),success:function(r){if(r.success){CR=0;$('#comment-item-'+id).fadeOut(function(){$('#comment-item-'+id).remove()});}else if(r.error){if(r.error==='login'){location.href='/login'}else if(r.error==='token'){location.reload()}}}})}}})
$(W).on('submit','.reply-form',function(e){EP(e);if(RF===0){RF=1;var T=$(this);var V=T.attr('data-reply');$('.reply-btn-'+V).prop('disabled',true);$('.reply-btn-'+V).html('Wait...');var Z=$('.rp-err-'+V);$.ajax({type:'post',url:'/ajax/tutorial_comment_reply.php',data:T.serialize()+'&token='+$('#csrf-token').val()+'&id='+V,success:function(r){RF=0;$('.reply-btn-'+V).prop('disabled',false);$('.reply-btn-'+V).html('Reply');if(r==='1'){location.reload();}else if(r==='2'){location.href='/login';}else if(r==='3'){Z.text('*You Cannot Enter Blank Reply*')}else if(r==='4'){Z.text('*Reply is Too long. Maximum 5000 characters*');}else if(r==='5'){Z.text('*Something Went Wrong. Please Refresh The Page And Try Again.*');}else{T[0].reset();Z.text('');$('#reply-form-'+V).slideUp();$('#reply-'+V).append(r);T[0].reset();$('#tut-c-count').text(parseInt($('#tut-c-count').text())+1);}}})}})
$('#comment-row').on('click','.more-reply',function(e){EP(e);loader_start();var T=$(this),V=T.attr('data-id');setTimeout(function(){$('#hidden-r-'+V).show();loader_end();},1000);});