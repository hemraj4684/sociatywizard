$(d).ready(function(){$('#add-parking').submit(function(e){PD(e);t=$(this);page_loader();$('.add-submit-btn').prop('disabled',true);
$.ajax({type:'post',data:t.serialize(),url:URL+'parkinglotform/add',complete:function(){page_loader_exit();$('.add-submit-btn').prop('disabled',false);},success:function(res){
if(res.success){t[0].reset();location.reload()}
if(res.pplate){$('.pplate').text(res.pplate)}else{$('.pplate').text('')}if(res.ptype){$('.ptype').text(res.ptype)}else{$('.ptype').text('')}if(res.plabel){$('.plabel').text(res.plabel)}else{$('.plabel').text('')}if(res.pmodel){$('.pmodel').text(res.pmodel)}else{$('.pmodel').text('')}if(res.flat_id){$('.flat_id').text(res.flat_id)}else{$('.flat_id').text('')}},dataType:'json'})})
$('.flat_float').searchflat();
$('.v-item').click(function(){t=$(this);d=t.data();$('.editable-parking').hide();$('.v-info-list').show();$('#eplabel').val(d.label);$('#epplate').val(d.plate);$('#epmodel').val(d.model);$('.eplabel').html(d.label);$('.epplate').html(d.plate);$('.epmodel').html(d.model)
if(d.vtype==2){$('.eptype2').html('Four Wheeler');$('#epfour').prop('checked',true)}else{$('#eptwo').prop('checked',true);$('.eptype2').html('Two Wheeler')}
$('.e_flat_id').val(d.flat);$('.eflatf').html(d.flat_f);$('#epflat').val(d.flat_f);$('#eid').val(d.id);Materialize.updateTextFields();})
$('.delete-vehicle').click(function(){if(confirm('Are you sure, you are deleting ?')){t=$(this);t.prop('disabled',true);t.html('<i class="fa fa-spin fa-spinner"></i> Deleting...');page_loader();$.ajax({type:'get',url:URL+'parkinglotform/delete/'+$('#eid').val(),complete:function(){page_loader_exit();t.prop('disabled',false);t.html('<i class="fa fa-trash left"></i> Delete')},success:function(res){$('.vitem_'+$('#eid').val()).remove();$('#edit_vehicle').closeModal();Materialize.toast('<i class="fa fa-thumbs-o-up"></i> &nbsp; Deleted Successfully!',3000,'green success-area')}})}})
$('.edit-v-btn').click(function(){$('.editable-parking').show();$('.v-info-list').hide()});$('.back-edit-v').click(function(){$('.editable-parking').hide();$('.v-info-list').show()})
$('#edit-parking').submit(function(e){PD(e);t=$(this);$('.edit-submit-btn').prop('disabled',true);page_loader();$('.edit-submit-btn').html('<i class="fa fa-spin fa-spinner"></i> Saving');$.ajax({type:'post',url:URL+'parkinglotform/edit',data:t.serialize(),success:function(res){if(res.pplate){$('.erpplate').text(res.pplate)}else{$('.erpplate').text('')}if(res.ptype){$('.erptype').text(res.ptype)}else{$('.erptype').text('')}if(res.plabel){$('.erplabel').text(res.plabel)}else{$('.erplabel').text('')}if(res.pmodel){$('.erpmodel').text(res.pmodel)}else{$('.erpmodel').text('')}if(res.flat_id){$('.erflat_id').text(res.flat_id)}else{$('.erflat_id').text('')}if(res.success){location.reload()}},complete:function(){page_loader_exit();$('.edit-submit-btn').prop('disabled',false);},dataType:'json'})})})